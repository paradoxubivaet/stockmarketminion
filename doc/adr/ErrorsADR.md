# Стратегия работы с исключениями.  
by ted7007

**Описание проблемы:**  
У команды нет общего представления работы с исключениями в проекте.

---  

**Цель:**
Необходимо выделить общее решение работы с исключениями -
* как их генерировать
* как их обрабатывать
* в каком виде они передаются в grpc методах
---

**Решение:**  

**Global exception handler**  
Решение заключается в использовании глобального обработчика исключениями. 

Суть этого варианта заключается в том, что мы создаем middleware обработчик исключений и вставляем его в начало нашего конвейера обработки запроса (pipeline).  
Также в клиентах grpc сервисов тоже создаем обработчики исключений ( в случае нашего проекта это будет только на фасаде ).  

В обработчиках мы можем логгировать системные/программистские ошибки генерировать и по ним rpc exceptions.  

Альтернативой глобальной обработке событий является обертка try/catch в ~~контроллерах~~ rpc методах. 

Глобальная обработка исключений имеет следующие преимущества по отношению к обертке всех rpc методов:  
* Читабельность, все обработки исключений централизованы и не засоряют наши методы.
* Из предыдущего пункта следует то, что мы можем вынести в такие обработчики например логгирование, или копи паст какого-то действия с конкретным типом исключений  

> следует понимать, что бывает необходимость обрабатывать исключения внутри нашего приложения, глобальный обработчик не предназначен для таких узких обработок.
[Пример обработчиков исключений в grpc](https://anthonygiretti.com/2020/03/31/grpc-asp-net-core-3-1-global-error-handling-in-grpc-grpc-status-codes/)  


